# @generated
# BUILD FILE SYNTAX: SKYLARK
# Generated by Okbuck, do not modify!
load('//.okbuck/defs:okbuck_targets.bzl', 'okbuck_android_library', 'okbuck_keystore', 'okbuck_manifest', 'res_glob', 'subdir_glob')

okbuck_manifest(
    name = 'manifest_lib_devDebug',
    main_manifest = 'src/main/AndroidManifest.xml',
    min_sdk = '24',
    target_sdk = '28',
    package = 'com.hackathon.buckapp',
    version_code = '1',
    version_name = '1.0',
    debuggable = True,
)

genrule(
    name = 'databinding_processRes_devDebug',
    cmd = 'java -jar /Users/carlo/Projects/aosp/tools/data-binding/exec/build/intermediates/fullJar/android-data-binding-fat.jar PROCESS ' +
    '-package com.hackathon.buckapp ' +
    '-resInput /Users/carlo/Projects/BuckApp/app/src/main/res ' +
    '-resOutput $OUT/res ' +
    '-layoutInfoOutput $OUT ' +
    '-zipLayoutInfo true ' +
    '-useAndroidX true',
    out = 'databinding_build'
)

genrule(
    name = 'databinding_gen_base_classes_devDebug',
    srcs = [':databinding_processRes_devDebug'],
    cmd = 'mkdir $OUT && ' +
    'java -jar /Users/carlo/Projects/aosp/tools/data-binding/exec/build/intermediates/fullJar/android-data-binding-fat.jar GEN_BASE_CLASSES ' +
    '-package com.hackathon.buckapp ' +
    '-classInfoOut $OUT/class-info.zip ' +
    '-layoutInfoFiles $SRCS/layout-info.zip ' +
    '-sourceOut $OUT/src-output.zip ' +
    '-useAndroidX true ' +
    '-zipSourceOutput true',
    out = 'databinding_build'
)

genrule(
    name = 'databinding_prepare_deps_devDebug',
    srcs = [
        ':databinding_processRes_devDebug',
        ':databinding_gen_base_classes_devDebug'
    ],
    cmd = 'mkdir $OUT && ' +
    'SRCS=($SRCS) &&' +
    'mkdir $OUT/src && unzip ${SRCS[1]}/src-output.zip -d $OUT/src && ' +
    'mkdir $OUT/class-info && unzip ${SRCS[1]}/class-info.zip -d $OUT/class-info && ' +
    'mkdir $OUT/layout-info && unzip ${SRCS[0]}/layout-info.zip -d $OUT/layout-info && ' +
    'echo "package com.hackathon.buckapp; import androidx.databinding.BindingBuildInfo; @BindingBuildInfo public class DataBindingInfo {}" > $OUT/src/com/hackathon/buckapp/DataBindingInfo.java',
    out = 'databinding_build'
)

genrule(
    name = 'databinding_provide_res',
    srcs = [':databinding_processRes_devDebug'],
    cmd = 'cp -r $SRCS/res $OUT && ' +
    'find $OUT -name ".DS_Store" -exec rm -f {} \;',
    out = 'res'
)

zip_file(
    name = 'zip_databinding_src',
    srcs = [':databinding_provide_src'],
    out = 'databinding_src.src.zip'
)

android_resource(
    name = 'res_devDebug',
    package = 'com.hackathon.buckapp',
    res = ':databinding_provide_res',
    deps = [
        '//.okbuck/ext/androidx/databinding:databinding-adapters-3.4.0.aar',
        '//.okbuck/ext/androidx/databinding:databinding-runtime-3.4.0.aar',
        '//.okbuck/ext/androidx/lifecycle:lifecycle-runtime-2.0.0.aar'
    ],
    visibility = [
        'PUBLIC',
    ]
)

android_build_config(
    name = 'build_config_devDebug',
    package = 'com.hackathon.buckapp',
    values = [
        'String APPLICATION_ID = "com.hackathon.buckapp.dev"',
        'String BUILD_TYPE = "debug"',
        'String FLAVOR = "dev"',
        'int VERSION_CODE = 1',
        'String VERSION_NAME = "1.0"',
    ],
    visibility = [
        'PUBLIC',
    ],
)

okbuck_android_library(
    name = 'src_devDebug',
    srcs =
    glob([
        'src/main/java/**/*.java'
    ]) + [':zip_databinding_src'],
    source = '8',
    target = '8',
    plugins = [
        '//.okbuck/ext/androidx/databinding:processor-databinding-compiler-3.4.0',
    ],
    provided_deps = [
        '//.okbuck/workspace/d8:rt-stub.jar',
    ],
    extra_arguments = [
        '-Aandroid.databinding.artifactType=APPLICATION',
        '-Aandroid.databinding.modulePackage=com.hackathon.buckapp',
        '-Aandroid.databinding.minApi=14',
        '-Aandroid.databinding.sdkDir=/not/used',
        '-Aandroid.databinding.dependencyArtifactsDir=/Users/carlo/Projects/BuckApp/buck-out/gen/app/databinding_prepare_deps_devDebug/databinding_build/class-info',
        '-Aandroid.databinding.classLogDir=/Users/carlo/Projects/BuckApp/buck-out/gen/app/databinding_prepare_deps_devDebug/databinding_build/class-info',
        '-Aandroid.databinding.layoutInfoDir=/Users/carlo/Projects/BuckApp/buck-out/gen/app/databinding_prepare_deps_devDebug/databinding_build/layout-info',
        '-Aandroid.databinding.aarOutDir=/Users/carlo/Projects/BuckApp/build-databinding/aarOutDir',
        '-Aandroid.databinding.exportClassListOutFile=/tmp/exported_classes',
        '-Aandroid.databinding.enableV2=1',
        '-Aandroid.databinding.enableDebugLogs=1',
        '-Aandroid.databinding.printEncodedErrorLogs=1'
],
    manifest = ':manifest_lib_devDebug',
    disable_lint = True,

    deps = [
        '//.okbuck/ext/androidx/annotation:annotation-1.0.0.jar',
        '//.okbuck/ext/androidx/arch/core:core-common-2.0.0.jar',
        '//.okbuck/ext/androidx/collection:collection-1.0.0.jar',
        '//.okbuck/ext/androidx/databinding:databinding-adapters-3.4.0.aar',
        '//.okbuck/ext/androidx/databinding:databinding-common-3.4.0.jar',
        '//.okbuck/ext/androidx/databinding:databinding-runtime-3.4.0.aar',
        '//.okbuck/ext/androidx/lifecycle:lifecycle-common-2.0.0.jar',
        '//.okbuck/ext/androidx/lifecycle:lifecycle-runtime-2.0.0.aar',
        ':build_config_devDebug',
        ':manifest_lib_devDebug',
        ':res_devDebug'
    ],
    visibility = [
        'PUBLIC',
    ],
)

okbuck_keystore(
    name = 'keystore_devDebug',
    storeFile = '//app:debug.keystore',
    storePassword = 'android',
    keyAlias = 'androiddebugkey',
    keyPassword = 'android',
)

okbuck_manifest(
    name = 'manifest_bin_devDebug',
    main_manifest = 'src/main/AndroidManifest.xml',
    min_sdk = '24',
    target_sdk = '28',
    package = 'com.hackathon.buckapp.dev',
    version_code = '1',
    version_name = '1.0',
    debuggable = True,
)

android_binary(
    name = 'bin_devDebug',
    manifest_skeleton = ':manifest_bin_devDebug',
    keystore = ':keystore_devDebug',
    dex_tool = 'd8',
    package_type = 'debug',
    manifest_entries = {
        'placeholders': {
            'applicationId': 'com.hackathon.buckapp.dev',
        },
    },
    deps = [
        ':res_devDebug',
        ':src_devDebug',
    ],
    visibility = [
        'PUBLIC',
    ],
)

export_file(
  name = 'debug.keystore',
  mode = 'reference',
  visibility = ['PUBLIC'],
)
